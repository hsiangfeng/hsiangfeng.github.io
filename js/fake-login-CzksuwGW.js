var p=Object.defineProperty;var m=(n,t,e)=>t in n?p(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var a=(n,t,e)=>m(n,typeof t!="symbol"?t+"":t,e);class g{constructor(){a(this,"modal",null);a(this,"input",null);a(this,"output",null);a(this,"canvas",null);a(this,"ctx",null);a(this,"matrixInterval",null);a(this,"logs",[]);a(this,"STORAGE_KEY_LOGS","array_exception_fake_login_logs");a(this,"STORAGE_KEY_MATRIX","array_exception_matrix_active");this.init(),this.loadState()}init(){const t=document.getElementById("fake-login-trigger");t&&t.addEventListener("click",e=>{e.preventDefault(),this.openModal()}),document.getElementById("fake-login-modal")||this.createModal(),this.modal=document.getElementById("fake-login-modal"),this.input=document.getElementById("fake-login-input"),this.output=document.getElementById("fake-login-output"),this.input&&this.input.addEventListener("keydown",e=>{e.key==="Enter"&&(this.handleCommand(this.input.value),this.input.value="")}),this.modal&&this.modal.addEventListener("click",e=>{e.target===this.modal&&this.closeModal()})}createModal(){document.body.insertAdjacentHTML("beforeend",`
      <div id="fake-login-modal" class="hidden fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center font-mono">
        <div class="w-full max-w-2xl bg-gray-900 border border-green-500/50 p-6 rounded shadow-2xl shadow-green-500/20 text-green-500 relative overflow-hidden">
          <div class="absolute top-0 left-0 w-full h-1 bg-green-500/30"></div>
          <div class="mb-4 text-sm opacity-70">
            Array Exception OS v1.0.0 (tty1)<br>
            Login required.
          </div>
          <div id="fake-login-output" class="mb-4 whitespace-pre-wrap"></div>
          <div class="flex items-center">
            <span class="mr-2">user@array-exception:~$</span>
            <input id="fake-login-input" type="text" class="bg-transparent border-none outline-none flex-1 text-green-400 focus:ring-0" autocomplete="off" spellcheck="false" autofocus>
          </div>
        </div>
      </div>
      <canvas id="matrix-canvas" class="fixed inset-0 z-[-1] pointer-events-none hidden opacity-50"></canvas>
    `)}openModal(){this.modal&&this.input&&(this.modal.classList.remove("hidden"),this.input.focus(),localStorage.getItem(this.STORAGE_KEY_MATRIX)==="true"?this.printOutput('System active. Type "stop" to terminate.',"success"):(this.printOutput("Authentication required.","error"),this.printOutput("Please enter password:","info")))}closeModal(){this.modal&&(this.modal.classList.add("hidden"),this.output&&(this.output.innerHTML=""))}printOutput(t,e="info"){this.renderLogLine(t,e),this.logs.push({text:t,type:e}),this.saveState()}saveState(){localStorage.setItem(this.STORAGE_KEY_LOGS,JSON.stringify(this.logs))}loadState(){const t=localStorage.getItem(this.STORAGE_KEY_LOGS);if(t)try{this.logs=JSON.parse(t),this.output&&(this.output.innerHTML=""),this.logs.forEach(s=>{this.renderLogLine(s.text,s.type)})}catch(s){console.error("Failed to load logs",s)}localStorage.getItem(this.STORAGE_KEY_MATRIX)==="true"&&this.startMatrixRain(!1)}renderLogLine(t,e){if(!this.output)return;let s="text-green-500";e==="error"&&(s="text-red-500"),e==="success"&&(s="text-green-400 font-bold");const l=document.createElement("div");l.className=`mb-1 ${s}`,l.textContent=`> ${t}`,this.output.appendChild(l),this.output.scrollTop=this.output.scrollHeight}handleCommand(t){const e=t.trim();if(e.toLowerCase()==="stop"){this.stopMatrixRain(),this.printOutput("System process terminated.","success");return}if(e.toUpperCase().includes("' OR '1'='1")){this.grantAccess("SQL INJECTION DETECTED. BYPASSING SECURITY...");return}["admin","root","password","123456","ray"].includes(e.toLowerCase())?this.grantAccess("CREDENTIALS ACCEPTED."):this.printOutput("Access Denied. Invalid credentials.","error")}grantAccess(t){this.printOutput(t,"success"),this.printOutput("Initializing root access...","success"),setTimeout(()=>{this.closeModal(),this.startMatrixRain(),console.log(`
      %c ACCESS GRANTED %c 
Welcome to the real world.
      `,"background: #00ff00; color: black; font-weight: bold; padding: 4px;","color: #00ff00;")},1500)}startMatrixRain(t=!0){if(t&&localStorage.setItem(this.STORAGE_KEY_MATRIX,"true"),this.canvas=document.getElementById("matrix-canvas"),!this.canvas||(this.canvas.classList.remove("hidden"),this.ctx=this.canvas.getContext("2d"),!this.ctx))return;this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight;const c="アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズブヅプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロヲゴゾドボポヴッン"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"0123456789",r=16,d=this.canvas.width/r,o=[];for(let i=0;i<d;i++)o[i]=1;const h=()=>{if(!(!this.ctx||!this.canvas)){this.ctx.fillStyle="rgba(0, 0, 0, 0.05)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#0F0",this.ctx.font=r+"px monospace";for(let i=0;i<o.length;i++){const u=c.charAt(Math.floor(Math.random()*c.length));this.ctx.fillText(u,i*r,o[i]*r),o[i]*r>this.canvas.height&&Math.random()>.975&&(o[i]=0),o[i]++}}};this.matrixInterval=window.setInterval(h,30)}stopMatrixRain(){localStorage.setItem(this.STORAGE_KEY_MATRIX,"false"),this.matrixInterval&&(clearInterval(this.matrixInterval),this.matrixInterval=null),this.canvas&&this.canvas.classList.add("hidden")}}export{g as FakeLogin};
